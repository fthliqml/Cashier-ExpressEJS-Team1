<div class="form-body">
  <div class="row">
    <div class="form-holder">
      <div class="form-content">
        <div class="form-items">
          <h3>Create New Order</h3>
          <form
            class="requires-validation"
            enctype="application/x-www-form-urlencoded"
            method="post"
            action="/orders/create"
          >
            <div class="col-md-12">
              <select
                id="customer"
                name="customer"
                class="form-select mt-3"
                required
              >
                <option selected disabled value="">Customer Name</option>
                <% customers.forEach(customer => { %>
                <option value="<%= customer.id %>">
                  <%= customer.firstName %> <%= customer.lastName %>
                </option>
                <% }) %>
              </select>
            </div>

            <div class="col-md-12">
              <select
                name="product"
                class="form-select mt-3"
                id="product"
                required
              >
                <option selected disabled value="">Product Name</option>
                <% products.forEach(product => { %>
                <option
                  value="<%= product.id %>"
                  data-price="<%= product.price %>"
                >
                  <%= product.name %>
                </option>
                <% }) %>
              </select>
            </div>

            <div class="col-md-12">
              <input
                id="quantity"
                class="form-control"
                type="text"
                name="quantity"
                placeholder="quantity"
                required
              />
            </div>

            <div class="col-md-12">
              <p class="fw-semibold mt-3 mb-1">Total Price:</p>
              <p id="price">Rp. 0</p>
            </div>

            <div class="form-button mt-3 d-flex justify-content-between">
              <a href="/orders" class="btn btn btn-outline-secondary">
                Cancel
              </a>
              <button id="submit" type="submit" class="btn btn-primary">
                Register
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  const productElement = document.getElementById("product");
  const quantityElement = document.getElementById("quantity");
  const priceElement = document.getElementById("price");

  function updateTotalPrice() {
    const price = parseInt(
      productElement.options[productElement.selectedIndex].getAttribute(
        "data-price"
      )
    );
    const quantity = parseInt(quantityElement.value, 10);

    if (!isNaN(price) && !isNaN(quantity)) {
      const totalPrice = price * quantity;
      priceElement.textContent = `Rp. ${totalPrice.toLocaleString()}`;
    } else {
      priceElement.textContent = "Rp. 0";
    }
  }

  productElement.addEventListener("change", updateTotalPrice);
  quantityElement.addEventListener("input", updateTotalPrice);
</script>
