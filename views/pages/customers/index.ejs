<title>
  <%= title%>
</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />

<div class="container mt-5">
  <h2 class="mb-4">Customers List</h2>
  <!-- Warning for messages -->
  <script>
    // get query parameter
    const urlParams = new URLSearchParams(window.location.search);
    const message = urlParams.get('message');

    // If there is a message, display an alert
    if (message) {
      alert(message);
    }
  </script>
  <div class="d-flex justify-content-between align-items-center mb-4">
    <a href="/customers/create" class="btn btn-primary">
      <img src="assets/fi_plus.png" class="logo-plus mr-3" alt=""><span>Add New Customer</span></a>
    <form class="d-flex align-items-center" action="/customers/search" method="get">
      <button type="submit" class="btn btn-primary mt-3 py-2 my-2">Search</button>
      <input type="text" class="form-control mr-2 ml-2" name="id" placeholder="Enter ID" required />
    </form>
  </div>




  <table class="table table-hover table-striped rounded-table">
    <thead class="table-dark">
      <tr class="text-center">
        <th scope="col">ID</th>
        <th scope="col">First Name</th>
        <th scope="col">Last Name</th>
        <th scope="col">Email</th>
        <th scope="col">Address</th>
        <th scope="col">Created At</th>
        <th scope="col">Updated At</th>
        <th scope="col">Action</th>
      </tr>
    </thead>
    <tbody class="bg-light text-dark text-center align-middle">
      <% customers.forEach((customer)=> { %>
        <tr>
          <th scope="row">
            <%= customer.id %>
          </th>
          <td>
            <%= customer.firstName %>
          </td>
          <td>
            <%= customer.lastName %>
          </td>
          <td>
            <%= customer.email %>
          </td>
          <td>
            <%= customer.address %>
          </td>
          <td>
            <%= customer.createdAt.toISOString().split('T')[0] %>
          </td>
          <td>
            <%= customer.updatedAt.toISOString().split('T')[0] %>
          </td>
          <td>
            <div class="d-flex justify-content-center gap-2">
              <a class="btn btn-success" href="/customers/<%= customer.id %>/edit">
                <img src="/assets/fi_edit.png" alt="Edit" width="18px" />
              </a>

              <form action="/customers/search" method="get">
                <input type="hidden" name="id" value="<%= customer.id %>" />
                <button class="btn btn-warning" id="btnDetail">
                  <i class="fa-regular fa-eye"></i>
                </button>
              </form>

              <form action="/customers/delete/<%= customer.id %>" method="post"
                onsubmit="return confirm('Are you sure you want to delete this customer?')">
                <button class="btn btn-outline-danger" id="btnDelete" type="submit">
                  <img src="/assets/fi_delete.png" alt="Delete" width="18px" />
                </button>
              </form>

            </div>
          </td>
        </tr>
        <% }); %>
    </tbody>
  </table>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>